\chapter{アシュアランスケースとGSN}
\label{chap5}

人工知能の研究開発は加速的に進み始めている。2022年に登場したChatGPTは、誰でも簡単にウエブ上で質問をすることができるチャットボットであるが、その回答の詳細さと自然さに、多くの人が驚いた。また歩行者や標識を自動認識する人工知能を持つ自動運転車は、アメリカのWaymo社や日本のTier4社など、多くの企業が開発競争を繰り広げており、アメリカではすでにカリフォルニア州において自動運転タクシーが実用化されている。しかしながら、チャットボットや自動認識を行う人工知能は、100\%正しい出力をするわけではない。であるにも関わらず、その圧倒的な利便性から、人工知能が組み込まれたシステムが加速的に普及していくことはより確実になってきている。そのような状況おいて、我々を取り巻くシステムが安心して利用できるものなのか、改めて社会的な合意形成が必要な時期になっている。

\section{アシュアランスケースとは}

アシュアランスケース（Assurance Cases）は、システムまたは製品の特性（安全性、セキュリティ、信頼性など）に関して、構造化された議論を明示的に示すドキュメントです。このドキュメントは、最上位の主張を下位の証拠および前提条件に結びつける形で構成されます。

特に安全性に焦点を当てたアシュアランスケースは、セーフティケース（Safety Case）と呼ばれます。セーフティケースは、機能安全や自動運転開発の分野で広く推奨されており、以下のような規格で言及されています：

\begin{itemize}
    \item ISO 26262（自動車の機能安全規格）
    \item SOTIF（ISO/PAS 21448, UL4600）
\end{itemize}

\section{MISRA Safety Case Guideline}

MISRA（Motor Industry Software Reliability Association）は、ISO 26262に準拠したSafety Caseを作成するためのガイドラインを提供しています。このガイドラインでは、安全性の議論を以下のような層構造で捉えています：

\begin{enumerate}
    \item Core（核心）: 適切な要求事項を得たか
    \item Layer 1（第1層）: 要求事項を満たしたか
    \item Layer 2（第2層）: 適切な手段を用いたか
    \item Layer 3（第3層）: 適切な環境で開発したか
\end{enumerate}

この構造に基づいて、自動車の安全性に関する議論は以下のように展開されます：

\begin{itemize}
    \item 自動車は完全で正しい安全ゴールの通りに動作する
    \item 自動車はハザードイベントiを低減する安全ゴールiの通りに動作する
    \item 安全ゴールiの妥当性
    \item 自動車の安全ゴールiへの準拠性
    \item 自動車の安全ゴールiの達成手段
    \item 自動車の安全ゴールiの開発手段
\end{itemize}

% ここにMISRA Safety Case Guidelineの図を挿入する
\textcolor{red}{[MISRA Safety Case Guidelineの図を挿入]}

\section{セーフティケースの重要性}

セーフティケースの重要性は、過去の事例からも明らかです。例えば、2009年から2010年にかけて発生したトヨタ自動車のスロットル制御システムの問題では、安全性に関する明確な説明や証拠の提示が不足していました。この事例は、「それらを明確に用意できていれば、もっと簡単に解決していた（かもしれない）」という教訓を残しました。

このような経験から、システムの安全性や信頼性に関する説明責任の重要性が高まっています。アシュアランスケースは、この説明責任を果たすための効果的なツールとなります。

\section{D-Caseの概要と基本原則}

\subsection{D-Caseとは}

D-Caseは、JST CREST DEOSプロジェクトのD-Caseコアチームによって2009年から2013年にかけて開発された手法です。名称の「D」は「Dependability（信頼性）」を表しています。

D-Caseの主な目的は以下の通りです：

\begin{itemize}
    \item 合意形成のための手法・ツールの提供
    \item 開発・運用を通じたアシュアランスケースによるディペンダビリティの合意形成
\end{itemize}

\section{D-Caseの目的: ミニマムの合意形成}

D-Caseの核心的な目的は、異なる立場や背景を持つステークホルダー間での「ミニマムの合意形成」を実現することです。以下の図は、この概念を視覚的に表現しています：

% ここにD-Caseの合意形成の図を挿入する
\textcolor{red}{[D-Caseの合意形成の図を挿入]}

この図が示すように、D-Caseは以下のプロセスを促進します：

\begin{enumerate}
    \item 異なる立場・関心・目的、経験・価値観を持つステークホルダーを特定する
    \item それぞれのステークホルダーの前提・主張を明確にする
    \item 共通の目的・前提を設定し、合意形成を図る
\end{enumerate}

\subsection{D-Caseの基本的な考え方}

D-Caseを効果的に活用するための基本的な考え方は以下の通りです：

\begin{itemize}
    \item GSN（Goal Structuring Notation）自体は基本的な構造にとどめ、大きすぎないようにする
    \item コンテキストには要求分析結果、安全分析結果、テスト結果などの詳細なドキュメントを配置する
    \item GSN自体は様々なドキュメントを紐付ける論理的な骨組みとして機能させる
    \item 他のドキュメントが充実していれば、GSN自体は迅速に作成できるようにする
\end{itemize}

この考え方により、D-Caseは複雑なシステムの信頼性を効率的に議論し、合意形成を促進するツールとなります。

\section{GSN（Goal Structuring Notation）}

\subsection{GSNの概要}

GSN（Goal Structuring Notation）は、アシュアランスケースを視覚的に表現するためのグラフィカル記法です。GSNは以下のような特徴を持ちます：

\begin{itemize}
    \item 議論のモデル化を可能にする
    \item 様々な目的で利用できる柔軟性がある
    \item 元々はシステムの安全性を保証するためのセーフティケースを記述する目的で開発された
    \item D-Caseにおいて中心的な役割を果たす
\end{itemize}

\section{GSNの基本要素}

GSNは以下の基本的なノードを使用して構成されます：

\begin{description}
    \item[ゴール（Goal）] ステークホルダ間で合意したい主張
    \item[戦略（Strategy）] 上位のゴールの分解の仕方を説明
    \item[前提（Context）] 議論の前提となる情報
    \item[証拠（Evidence）] ゴールが達成できていることを示す証拠（テスト結果など）
    \item[未達成（Undeveloped）] まだ具体化できていないゴールや説明であることを示す
\end{description}

% ここにGSNの基本要素の図を挿入する
\textcolor{red}{[GSNの基本要素の図を挿入]}

\subsection{GSNのノード接続ルール}

GSNのノードを接続する際は、以下のルールに従います：

\begin{itemize}
    \item 「前提」に接続する場合はコンテキストリンク（点線）を使用
    \item それ以外の接続にはサポートリンク（実線）を使用
    \item 終端は必ず「証拠」か「未達成」
    \item 「ゴール」は「戦略」に基づきサブゴールに分解する
\end{itemize}

% ここにGSNのノード接続ルールの図を挿入する
\textcolor{red}{[GSNのノード接続ルールの図を挿入]}

\subsection{GSNの作成例}

以下に、GSNの簡単な作成例を示します。この例では、システムの安全性を主張するためのGSNを構築しています。

% ここにGSNの簡単な例の図を挿入する
\textcolor{red}{[GSNの簡単な例の図を挿入]}

この例では、以下の要素が含まれています：

\begin{itemize}
    \item トップゴール：「システムは安全である」
    \item 戦略：「ハザードごとに議論する」
    \item サブゴール：「ハザードAに対処できる」「ハザードBに対処できる」
    \item 前提：「ハザードリストA,B」
    \item 証拠：「テスト結果」
\end{itemize}

このように、GSNを用いることで、システムの安全性に関する議論を構造化し、視覚的に表現することができます。

\section{D-Caseステップ}

\subsection{D-Caseステップの概要}

D-Caseステップは、システム開発や日常の場で異なるステークホルダが手軽に合意形成を行うためのプロセスです。このプロセスは、システム開発における様々なミスコミュニケーションを減らし、ディペンダビリティを向上させることを目的としています。

D-Caseステップは以下の3つのステップから構成されます：

\begin{enumerate}
    \item ステークホルダの設定
    \item D-Caseの記述
    \item 合意形成の実施
\end{enumerate}

\subsection{ステップ1：ステークホルダの設定}

このステップでは、プロジェクトや議論に関わる全てのステークホルダを特定します。ステークホルダには、開発者、利用者、運用者など、システムに関わる全ての人々が含まれます。

ステークホルダを明確化することで、以下の利点があります：

\begin{itemize}
    \item 各ステークホルダの立場・関心・考え・経験・価値観を理解できる
    \item ステークホルダ間の潜在的な対立や誤解を事前に特定できる
    \item 合意形成のプロセスをスムーズに進められる
\end{itemize}

\subsection{ステップ2：D-Caseの記述}

D-Caseの記述は、以下の3段階で行います：

\begin{enumerate}
    \item 「前提」とトップの「ゴール」を設定する
    \item 「戦略」を設定し、トップゴールを分割してサブの「ゴール」を設定する
    \item それぞれの最終ゴールのための「証拠」（または「未達成」）を設定する
\end{enumerate}

この過程で、以下の点に注意します：

\begin{itemize}
    \item これまでのD-Caseがあれば参照する
    \item 設定したステークホルダの情報を考慮する
    \item 論理的な構造を保ちながら、詳細化していく
\end{itemize}

\subsection{ステップ3：合意形成の実施}

合意形成の実施には、以下の2つの場合があります：

\begin{description}
    \item[ステークホルダ全員の場合] プロジェクタ等でD-Caseを表示しながら、合意ができるか議論する
    \item[一部のステークホルダのみの場合] D-Case記述不参加のステークホルダにもわかるよう合意形成を行う。必要であればD-Caseと同等の情報量を持つ絵や文章を用意する
\end{description}

\subsection{D-Caseの評価基準}

作成したD-Caseは、以下の3つの観点から評価します：

\begin{description}
    \item[前提の妥当性] 前提が過不足なく配置されているか
    \item[議論の妥当性] 議論が論理的でステークホルダが理解できるか
    \item[規模の妥当性] ステークホルダが理解できる規模か
\end{description}

評価の結果、改善が必要な場合は、これらの基準に基づいてD-Caseを修正します。一般的に、スライド1枚で見えるくらいの規模が目安となります。

\section{事例紹介：自動運転システム}

\subsection{レベル4自動運転システムの事例}

ここでは、レベル4自動運転システムを継続的に保証するための枠組みを提案した事例を紹介します。この事例は、SafeComp 2024で発表された「A Case Study of Continuous Assurance Argument for Level 4 Automatic Driving」に基づいています。

主な特徴：

\begin{itemize}
    \item\item 塩尻駅から塩尻市庁舎の周回コース(2km)を対象とする
    \item 特に市役所へ入るための右折にフォーカス
    \item STAMP/STPAの分析結果などをもとにGSNを記述
\end{itemize}

この事例研究では、自動運転シャトルバスが直面する様々な信頼性の課題に焦点を当てています。例えば、道路上の物体に対する過度に保守的な安全マージンは、車両が無期限に右折できなくなる可能性があり、交通システム全体の可用性を低下させる可能性があります。

\subsection{継続的アシュアランスの重要性}

この研究では、静的なアシュアランスケースだけでなく、継続的なモニタリングデータを組み合わせた動的なアプローチの重要性を強調しています。UL4600（自動運転車の国際標準）で導入されている安全性能指標（SPIs）は、この考え方を反映したものです。

SPIsは、設計、シミュレーション、テスト、展開の各段階で安全性主張が反証されていないかを検出する手段を提供します。著者らが提案するモニタリングシステムを含むツールチェーンは、このSPIメカニズムの一例と言えます。

\subsection{アシュアランスケースのトップレベル構造}

レベル4自動運転システムのアシュアランスケースのトップレベル構造は、以下のような要素で構成されています：

\begin{itemize}
    \item システムの安全性に関する最上位の主張
    \item 運用条件、環境条件などの前提
    \item サブシステムごとの安全性主張
    \item 妥当性検証と評価に関する主張
\end{itemize}

% ここにアシュアランスケースのトップレベル構造の図を挿入する
\textcolor{red}{[アシュアランスケースのトップレベル構造の図を挿入]}

\subsection{特定のユースケースの妥当性検証}

この事例研究では、塩尻市での特定のユースケース（市役所への右折）に焦点を当てた妥当性検証のGSN図も提示されています。この図は、以下のような要素を含んでいます：

\begin{itemize}
    \item ユースケースの安全性に関する主張
    \item 安全性要求事項の充足性
    \item テストシナリオの網羅性
    \item 実環境でのテスト結果
\end{itemize}

% ここに特定のユースケースの妥当性検証のGSN図を挿入する
\textcolor{red}{[特定のユースケースの妥当性検証のGSN図を挿入]}

この詳細なGSN図は、特定のユースケースに対する安全性の議論を構造化し、必要な証拠と論理的つながりを明確に示しています。

\section{まとめ}

本書では、システムのディペンダビリティを確保するための重要なツールであるアシュアランスケースとGSNについて学びました。主な内容は以下の通りです：

\begin{itemize}
    \item アシュアランスケース：システムが信頼できることを示すドキュメント
    \item GSN（Goal Structuring Notation）：グラフィカルなアシュアランスケースの表記法、モデル
    \item D-Case：ステークホルダ間の合意形成を促進するための手法
    \item 自動運転システムなどの最近のシステムでの実践例
\end{itemize}

これらの手法と概念は、今日の複雑化するシステム開発において、信頼性、安全性、セキュリティを確保するために不可欠なものとなっています。特に、自動運転技術やAIシステムなど、新しい技術の導入に伴い、システムの振る舞いの予測が困難になる中で、アシュアランスケースの重要性はますます高まっています。

今後のシステム開発者は、これらの手法を効果的に活用し、システムの信頼性を体系的に示す能力を磨くことが求められます。同時に、継続的なモニタリングと評価を通じて、システムの安全性と信頼性を維持・向上させていく必要があります。

アシュアランスケースとGSNは、単なる文書化ツールではなく、システム開発のプロセス全体を通じて、安全性と信頼性に関する思考を構造化し、ステークホルダ間のコミュニケーションを促進する強力な手段です。これらを適切に活用することで、より安全で信頼性の高いシステムの開発が可能となるでしょう。

